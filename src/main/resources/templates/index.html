<!doctype html>
<html lang="en">
  <head>
    <title>染色体变异</title>
    <meta charset="utf-8">

    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


    <link rel="stylesheet" href="/css/bootstrap.css">
    <link rel="stylesheet" href="/css/animate.css">
    <link rel="stylesheet" href="/css/owl.carousel.min.css">

    <link rel="stylesheet" href="/fonts/ionicons/css/ionicons.min.css">
    <link rel="stylesheet" href="/fonts/fontawesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/fonts/flaticon/font/flaticon.css">
    <link rel="stylesheet" href="/css/element.css">

    <!-- Theme Style -->
    <link rel="stylesheet" href="/css/style.css">
    <script>

    </script>
  </head>
  <body>

    

    <!-- END header -->

    <section class="site-hero overlay" data-stellar-background-ratio="0.5" style="position: fixed;left: 0;top:0;height:100%;width:100%;background-image: url(http://127.0.0.1:8080/images/big_image_1.jpg);">
      <div class="container">
        <div class="row align-items-center site-hero-inner justify-content-center">
          <div class="col-md-8 text-center">

            <div class="mb-5 element-animate">
              <h1>染色体变异</h1>
              <div id="app">
              <p class="lead">当前在线设备:<a>{{nums}}</a></p>
              </div>
              <p><a  class="btn btn-primary" id="begin1">一阶段</a></p>

              <p><a  class="btn btn-primary" id="begin2" style="margin-top: 20px">二阶段</a></p>


            </div>

          </div>
        </div>
      </div>
    </section>
    <!-- END section -->


    
    <!-- loader -->
    <div id="loader" class="show fullscreen"><svg class="circular" width="48px" height="48px"><circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee"/><circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10" stroke="#f4b214"/></svg></div>

    <script src="/js/jquery-3.2.1.min.js"></script>
    <script src="/js/jquery-migrate-3.0.0.js"></script>
    <script src="/js/popper.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/owl.carousel.min.js"></script>
    <script src="/js/jquery.waypoints.min.js"></script>
    <script src="/js/jquery.stellar.min.js"></script>
    <script src="/js/vue.js"></script>
    <script src="/js/element.js"></script>


    
    <script src="/js/main.js"></script>
    <script>
        $.ajax({
            type: "GET",
            dataType: "JSON",
            url: "http://127.0.0.1:8080/app/updateCmdls?status=0",
            contentType: "application/json",
            success:function (result) {

            }
        });
        $.ajax({
            type: "GET",
            dataType: "JSON",
            url: "http://127.0.0.1:8080/app/deletesetp",
            contentType: "application/json",
            success:function (result) {

            }
        });
        vueobj=new Vue({
            el:"#app",
            data() {
                return {
                    nums:0
                };
            }

        });
    $('#begin1').click(function () {
        $.ajax({
            type: "GET",
            dataType: "JSON",
            url: "http://127.0.0.1:8080/app/updateCmdls?status=1",
            contentType: "application/json",
            success:function (result) {
              if (result){
                  window.location.href="http://127.0.0.1:8080/web/view";
              }
            }
        });
    });


        $('#begin2').click(function () {
            $.ajax({
                type: "GET",
                dataType: "JSON",
                url: "http://127.0.0.1:8080/app/updateCmdls?status=2",
                contentType: "application/json",
                success:function (result) {
                    if (result){
                        window.location.href="http://127.0.0.1:8080/web/view1";
                    }
                }
            });
        });


        $.ajax({
            type: "GET",
            dataType: "JSON",
            url: "http://127.0.0.1:8080/app/allonlineshebei",
            contentType: "application/json",
            success:function (Result) {
                var a=new Array();
                a=Result;
                vueobj.nums=a.length;
            }
            });

        setInterval("ref()",3000);

        function ref() {
            $.ajax({
                type: "GET",
                dataType: "JSON",
                url: "http://127.0.0.1:8080/app/allonlineshebei",
                contentType: "application/json",
                success:function (Result) {
                    var a=new Array();
                    a=Result;
                    vueobj.nums=a.length;
                }
            });
        }

    </script>

  </body>
</html>